<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chat — Cloud Optimizer</title>
    <link href="./vendor/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="./css/dashboard.css" rel="stylesheet">
    <style>
      .chat-window{height:62vh;overflow:auto;background:rgba(255,255,255,0.03);padding:1rem;border-radius:.5rem}
      .msg-in{background:#0d6efd11;border-radius:.5rem;padding:.5rem .75rem;margin:.25rem 0;display:inline-block}
      .msg-out{background:#19875422;border-radius:.5rem;padding:.5rem .75rem;margin:.25rem 0;display:inline-block}
      .chat-footer{position:sticky;bottom:0;background:transparent;padding-top:.5rem}
      .status-dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:.5rem}
      .status-online{background:#28a745}
      .status-offline{background:#6c757d}
    </style>
  </head>
  <body class="bg-dark-login">
    <nav class="navbar navbar-dark bg-dark px-3">
      <a class="navbar-brand" href="./dashboard.html">Cloud Optimizer</a>
      <div>
        <a class="btn btn-sm btn-outline-light" href="./clients.html">Back to Clients</a>
      </div>
    </nav>

    <div class="container-fluid dashboard-layout mt-3">
      <div class="row">
        <div class="col-12 col-lg-10 offset-lg-1">
          <div class="card card-dark p-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <div>
                <h5 id="chatTitle" class="mb-0">Chat</h5>
                <small id="chatSub" class="text-muted">Loading client…</small>
              </div>
              <div class="text-end">
                <span id="wsStatus" class="me-2"><span class="status-dot status-offline"></span> disconnected</span>
                <button id="connectBtn" class="btn btn-sm btn-outline-light">Connect</button>
                <button id="disconnectBtn" class="btn btn-sm btn-outline-light d-none">Disconnect</button>
              </div>
            </div>

            <div id="chatWindow" class="chat-window mb-2" aria-live="polite" aria-atomic="false"></div>

            <div class="chat-footer">
              <form id="chatForm" class="d-flex gap-2">
                <input id="chatInput" class="form-control" placeholder="Type a message..." autocomplete="off">
                <button class="btn btn-primary" type="submit">Send</button>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>

    <script src="./vendor/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/chat.js"></script>
  </body>
</html>
